---
layout: docs
page_title: Running Vault - Kubernetes
sidebar_title: Running Vault
description: >-
  Vault can run directly on Kubernetes in various configurations.  For
  pure-Kubernetes workloads, this enables Vault to also exist purely within
  Kubernetes.
---

# Run Vault on Kubernetes

Vault works with Kubernetes in various modes: `dev`, `standalone`, `ha`,
and `external`.

~> **Important Note:** This chart is not compatible with Helm 2. Please use Helm 3 with this chart.

<div
  className="wistia_responsive_padding"
  style={{ padding: "56.25% 0 0 0;position:relative;" }}>
    <div
      className="wistia_responsive_wrapper"
      style={{ height: "100%;left:0;position:absolute;top:0;width:100%;" }}>
      <iframe src="https://fast.wistia.net/embed/iframe/98n6mce212?seo=false&videoFoam=true" title="Install Vault with Helm Video" allowtransparency="true" frameborder="0" scrolling="no" class="wistia_embed" name="wistia_embed" allowfullscreen mozallowfullscreen webkitallowfullscreen oallowfullscreen msallowfullscreen width="100%" height="100%"></iframe>
    </div>
</div>
<script src="https://fast.wistia.net/assets/external/E-v1.js" async></script>

## Helm Chart

The [Vault Helm chart](https://github.com/hashicorp/vault-helm)
is the recommended way to install and configure Vault on Kubernetes.
In addition to running Vault itself, the Helm chart is the primary
method for installing and configuring Vault to integrate with other
services such as Consul for High Availability (HA) deployments.

While the Helm chart automatically sets up complex resources and exposes the
configuration to meet your requirements, it **does not automatically operate
Vault.** You are still responsible for learning how to monitor, backup, upgrade,
etc. the Vault cluster.

~> **Security Warning:** By default, the chart runs in standalone mode. This
mode uses a single Vault server with a file storage backend. This is a less
secure and less resilient installation that is **NOT** appropriate for a
production setup. It is highly recommended to use a [properly secured Kubernetes
cluster](https://kubernetes.io/docs/tasks/administer-cluster/securing-a-cluster/),
[learn the available configuration
options](/docs/platform/k8s/helm/configuration), and read the [production deployment
checklist](/docs/platform/k8s/helm/secure#architecture).

## Install Vault

Helm must be installed and configured on your machine. Please refer to the [Helm
documentation](https://helm.sh/) or the [Vault Installation to Minikube via
Helm](https://learn.hashicorp.com/vault/getting-started-k8s/minikube) guide.

To use the Helm chart, you can target a specific [release published to
GitHub](https://github.com/hashicorp/vault-helm/releases) or download/clone the
[vault-helm GitHub repository](https://github.com/hashicorp/vault-helm). In the
future, we plan publishing to a public Helm repository.

-> **Important:** The Helm chart is new and under significant development.
Please always run Helm with `--dry-run` before any install or upgrade to verify
changes.

Install the Vault Helm chart version 0.4.0.

```sh
$ helm install vault https://github.com/hashicorp/vault-helm/archive/v0.4.0.tar.gz
```

Or, clone the Vault Helm chart, check out tagged version v0.4.0, and install
the Vault Helm chart from the filesystem.

```sh
# Clone the chart repo
$ git clone https://github.com/hashicorp/vault-helm.git
$ cd vault-helm

# Checkout a tagged version
$ git checkout v0.4.0

# Run Helm
$ helm install vault ./
```

~> **NOTE:** We highly recommend you checkout a specific [tagged
release](https://github.com/hashicorp/vault-helm/releases) of the chart to avoid
any instabilities from master.

The `helm install` command accepts parameters to override default configuration
values inline or defined in a file.

Override the `server.dev.enabled` configuration value:

```sh
$ helm install vault \
    --set "server.dev.enabled=true" \
    https://github.com/hashicorp/vault-helm/archive/v0.4.0.tar.gz
```

Override all the configuration found in a file:

```sh
$ cat override-values.yml
server:
  ha:
    enabled: true
    replicas: 5
##
$ helm install vault \
    --values override-values.yml \
    https://github.com/hashicorp/vault-helm/archive/v0.4.0.tar.gz
```

### Dev mode

The Helm chart may run a Vault server in development. This installs a single
Vault server with a memory storage backend.

-> **Dev mode:** This is ideal for learning and demonstratation environments but
NOT recommended for a production environment.

Install the Vault Helm chart version 0.4.0 in development mode.

```sh
$ helm install vault \
    --set "server.dev.enabled=true" \
    https://github.com/hashicorp/vault-helm/archive/v0.4.0.tar.gz
```

### Standalone mode

The Helm chart defaults to run in `standalone` mode. This installs a single
Vault server with a file storage backend.

Install the Vault Helm chart version 0.4.0 in standalone mode.

```sh
$ helm install vault https://github.com/hashicorp/vault-helm/archive/v0.4.0.tar.gz
```

### HA mode

The Helm chart may be run in high availability (HA) mode. This installs three
Vault servers with an existing Consul storage backend. It is suggested that
Consul is installed via the [Consul Helm
chart](https://github.com/hashicorp/consul-helm).

Install the Vault Helm chart version 0.4.0 in HA mode.

```sh
$ helm install vault \
    --set "server.ha.enabled=true" \
    https://github.com/hashicorp/vault-helm/archive/v0.4.0.tar.gz
```

-> **Step-by-step instructions:** The [Vault Installation to Minikube via
Helm](https://learn.hashicorp.com/vault/getting-started-k8s/minikube) guide
demonstrates the setup of Consul and Vault in HA mode.

### External mode

The Helm chart may be run in external mode. This installs no Vault server and
relies on a network addressable Vault server to exist.

Install the Vault Helm chart version 0.4.0 in external mode.

```sh
$ helm install vault \
    --set "injector.externalVaultAddr=http://external-vault:8200" \
    https://github.com/hashicorp/vault-helm/archive/v0.4.0.tar.gz
```

-> **Step-by-step instructions:** The [Integrate a Kubernetes Cluster with an
External
Vault](https://learn.hashicorp.com/vault/getting-started-k8s/external-vault)
guide demonstrates using an external Vault within a Kubernetes cluster.

## View the Vault UI

The Vault UI is enabled but NOT exposed as service for security reasons. The
Vault UI can also be exposed via port-forwarding or through a [`ui`
configuration value](/docs/platform/k8s/helm/configuration/#ui).

Expose the Vault UI with port-forwarding:

```sh
$ kubectl port-forward vault-0 8200:8200
Forwarding from 127.0.0.1:8200 -> 8200
Forwarding from [::1]:8200 -> 8200
##...
```
