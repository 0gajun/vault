### GENERATED BY .circleci/config/@build-release.yml; DO NOT MANUALLY EDIT OR MERGE THIS FILE

# Any change to $cacheVersion invalidates all build layer and package caches.
# Current $cacheVersion: buildcache-v1

workflows:
  build-release:
    jobs:
      - cache-builder-images:
          filters:
            branches:
              only:
                - /build-.*/
                - /ci.*/
      - package_darwin_386: { requires: [ cache-builder-images ] }
      - package_darwin_amd64: { requires: [ cache-builder-images ] }
      - bundle-releases:
          requires:
            - package_darwin_386
            - package_darwin_amd64
jobs:
  cache-builder-images:
    executor: releaser
    steps:
      - setup_remote_docker
      - checkout
      - write-cache-keys
      - restore_cache:
          keys:
            - buildcache-v1-base_02376a8228ddcfc3d014c896ea4897e75582221a-{{ checksum ".buildcache/cache-keys/base-02376a8228ddcfc3d014c896ea4897e75582221a" }}-yarn_4b8331e0d10d5546bf2b0a2b368376e7b9d7548f-{{ checksum ".buildcache/cache-keys/yarn-4b8331e0d10d5546bf2b0a2b368376e7b9d7548f" }}-ui_91f1adae63f46e6e66c3c656ac7d3575e9a107cc-{{ checksum ".buildcache/cache-keys/ui-91f1adae63f46e6e66c3c656ac7d3575e9a107cc" }}-static_24b2c191871f61aa3b8d496820c689ff4c60e495-{{ checksum ".buildcache/cache-keys/static-24b2c191871f61aa3b8d496820c689ff4c60e495" }}
            - buildcache-v1-base_02376a8228ddcfc3d014c896ea4897e75582221a-{{ checksum ".buildcache/cache-keys/base-02376a8228ddcfc3d014c896ea4897e75582221a" }}-yarn_4b8331e0d10d5546bf2b0a2b368376e7b9d7548f-{{ checksum ".buildcache/cache-keys/yarn-4b8331e0d10d5546bf2b0a2b368376e7b9d7548f" }}-ui_91f1adae63f46e6e66c3c656ac7d3575e9a107cc-{{ checksum ".buildcache/cache-keys/ui-91f1adae63f46e6e66c3c656ac7d3575e9a107cc" }}
            - buildcache-v1-base_02376a8228ddcfc3d014c896ea4897e75582221a-{{ checksum ".buildcache/cache-keys/base-02376a8228ddcfc3d014c896ea4897e75582221a" }}-yarn_4b8331e0d10d5546bf2b0a2b368376e7b9d7548f-{{ checksum ".buildcache/cache-keys/yarn-4b8331e0d10d5546bf2b0a2b368376e7b9d7548f" }}
            - buildcache-v1-base_02376a8228ddcfc3d014c896ea4897e75582221a-{{ checksum ".buildcache/cache-keys/base-02376a8228ddcfc3d014c896ea4897e75582221a" }}
      - run: make -f release/layer.mk static_24b2c191871f61aa3b8d496820c689ff4c60e495-load || echo "No cached builder image to load."
      - run: make -f release/layer.mk static_24b2c191871f61aa3b8d496820c689ff4c60e495-image
      - run: make -f release/layer.mk static_24b2c191871f61aa3b8d496820c689ff4c60e495-save
      - save_cache:
          key: buildcache-v1-base_02376a8228ddcfc3d014c896ea4897e75582221a-{{ checksum ".buildcache/cache-keys/base-02376a8228ddcfc3d014c896ea4897e75582221a" }}-yarn_4b8331e0d10d5546bf2b0a2b368376e7b9d7548f-{{ checksum ".buildcache/cache-keys/yarn-4b8331e0d10d5546bf2b0a2b368376e7b9d7548f" }}-ui_91f1adae63f46e6e66c3c656ac7d3575e9a107cc-{{ checksum ".buildcache/cache-keys/ui-91f1adae63f46e6e66c3c656ac7d3575e9a107cc" }}-static_24b2c191871f61aa3b8d496820c689ff4c60e495-{{ checksum ".buildcache/cache-keys/static-24b2c191871f61aa3b8d496820c689ff4c60e495" }}
          paths:
            - .buildcache/archives/static_24b2c191871f61aa3b8d496820c689ff4c60e495.tar.gz

  bundle-releases:
    executor: releaser
    steps:
      - checkout
      - write-cache-keys
      - "load-package_darwin_386"
      - "load-package_darwin_amd64"
      - run: ls -lahR dist/
  package_darwin_386:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: c7f9859c3092fc95a40524186ca2c4e7c51e0079
      - BINARY_NAME: 'vault'
      - BUILDER_LAYER_ID: 'static_24b2c191871f61aa3b8d496820c689ff4c60e495'
      - BUILD_JOB_NAME: 'package_darwin_386'
      - BUILD_TAGS: 'vault'
      - BUNDLE_NAME: 'vault_1.2.1-testbuild-sam'
      - CGOENABLED: '0'
      - GO111MODULE: 'off'
      - GOARCH: '386'
      - GOOS: 'darwin'
      - GO_VERSION: '1.12.13'
      - PACKAGE_NAME: 'vault_1.2.1-testbuild-sam_darwin_386'
      - PACKAGE_OUT_ROOT: 'dist/public/vault_1.2.1-testbuild-sam'
      - PRODUCT_EDITION: ''
      - PRODUCT_NAME: 'vault'
      - PRODUCT_VERSION: '1.2.1-testbuild-sam'
      - PRODUCT_VERSION_MMP: '1.2.1'
      - PRODUCT_VERSION_PRE: 'testbuild-sam'
      - PUBLIC: 'YES'
      - YARN_VERSION: '1.19.1-1'
    steps:
      - setup_remote_docker
      - checkout
      - write-cache-keys
      - restore_cache:
          keys:
          - buildcache-v1-base_02376a8228ddcfc3d014c896ea4897e75582221a-{{ checksum ".buildcache/cache-keys/base-02376a8228ddcfc3d014c896ea4897e75582221a" }}-yarn_4b8331e0d10d5546bf2b0a2b368376e7b9d7548f-{{ checksum ".buildcache/cache-keys/yarn-4b8331e0d10d5546bf2b0a2b368376e7b9d7548f" }}-ui_91f1adae63f46e6e66c3c656ac7d3575e9a107cc-{{ checksum ".buildcache/cache-keys/ui-91f1adae63f46e6e66c3c656ac7d3575e9a107cc" }}-static_24b2c191871f61aa3b8d496820c689ff4c60e495-{{ checksum ".buildcache/cache-keys/static-24b2c191871f61aa3b8d496820c689ff4c60e495" }}
          - buildcache-v1-base_02376a8228ddcfc3d014c896ea4897e75582221a-{{ checksum ".buildcache/cache-keys/base-02376a8228ddcfc3d014c896ea4897e75582221a" }}-yarn_4b8331e0d10d5546bf2b0a2b368376e7b9d7548f-{{ checksum ".buildcache/cache-keys/yarn-4b8331e0d10d5546bf2b0a2b368376e7b9d7548f" }}-ui_91f1adae63f46e6e66c3c656ac7d3575e9a107cc-{{ checksum ".buildcache/cache-keys/ui-91f1adae63f46e6e66c3c656ac7d3575e9a107cc" }}
          - buildcache-v1-base_02376a8228ddcfc3d014c896ea4897e75582221a-{{ checksum ".buildcache/cache-keys/base-02376a8228ddcfc3d014c896ea4897e75582221a" }}-yarn_4b8331e0d10d5546bf2b0a2b368376e7b9d7548f-{{ checksum ".buildcache/cache-keys/yarn-4b8331e0d10d5546bf2b0a2b368376e7b9d7548f" }}
          - buildcache-v1-base_02376a8228ddcfc3d014c896ea4897e75582221a-{{ checksum ".buildcache/cache-keys/base-02376a8228ddcfc3d014c896ea4897e75582221a" }}
      - restore_cache:
          key: 'package-{{checksum ".buildcache/cache-keys/package-c7f9859c3092fc95a40524186ca2c4e7c51e0079"}}'
      - run: make -f release/layer.mk static_24b2c191871f61aa3b8d496820c689ff4c60e495-load || echo "No cached builder image to load."
      - run: make -C release package
      - run: ls -lahR dist/
      - store_artifacts:
          path: dist/public/vault_1.2.1-testbuild-sam
          destination: dist/public/vault_1.2.1-testbuild-sam
      # Save builder image cache.
      - save_cache:
          key: 'buildcache-v1-base_02376a8228ddcfc3d014c896ea4897e75582221a-{{ checksum ".buildcache/cache-keys/base-02376a8228ddcfc3d014c896ea4897e75582221a" }}-yarn_4b8331e0d10d5546bf2b0a2b368376e7b9d7548f-{{ checksum ".buildcache/cache-keys/yarn-4b8331e0d10d5546bf2b0a2b368376e7b9d7548f" }}-ui_91f1adae63f46e6e66c3c656ac7d3575e9a107cc-{{ checksum ".buildcache/cache-keys/ui-91f1adae63f46e6e66c3c656ac7d3575e9a107cc" }}-static_24b2c191871f61aa3b8d496820c689ff4c60e495-{{ checksum ".buildcache/cache-keys/static-24b2c191871f61aa3b8d496820c689ff4c60e495" }}'
          paths:
            - .buildcache/archives/static_24b2c191871f61aa3b8d496820c689ff4c60e495.tar.gz
      # Save package cache.
      - save_cache:
          key: 'package-{{checksum ".buildcache/cache-keys/package-c7f9859c3092fc95a40524186ca2c4e7c51e0079"}}'
          paths:
            - dist/public/vault_1.2.1-testbuild-sam

  package_darwin_amd64:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 274c2d659472a2c59ce257bf00b705aea142e36a
      - BINARY_NAME: 'vault'
      - BUILDER_LAYER_ID: 'static_24b2c191871f61aa3b8d496820c689ff4c60e495'
      - BUILD_JOB_NAME: 'package_darwin_amd64'
      - BUILD_TAGS: 'vault'
      - BUNDLE_NAME: 'vault_1.2.1-testbuild-sam'
      - CGOENABLED: '0'
      - GO111MODULE: 'off'
      - GOARCH: 'amd64'
      - GOOS: 'darwin'
      - GO_VERSION: '1.12.13'
      - PACKAGE_NAME: 'vault_1.2.1-testbuild-sam_darwin_amd64'
      - PACKAGE_OUT_ROOT: 'dist/public/vault_1.2.1-testbuild-sam'
      - PRODUCT_EDITION: ''
      - PRODUCT_NAME: 'vault'
      - PRODUCT_VERSION: '1.2.1-testbuild-sam'
      - PRODUCT_VERSION_MMP: '1.2.1'
      - PRODUCT_VERSION_PRE: 'testbuild-sam'
      - PUBLIC: 'YES'
      - YARN_VERSION: '1.19.1-1'
    steps:
      - setup_remote_docker
      - checkout
      - write-cache-keys
      - restore_cache:
          keys:
          - buildcache-v1-base_02376a8228ddcfc3d014c896ea4897e75582221a-{{ checksum ".buildcache/cache-keys/base-02376a8228ddcfc3d014c896ea4897e75582221a" }}-yarn_4b8331e0d10d5546bf2b0a2b368376e7b9d7548f-{{ checksum ".buildcache/cache-keys/yarn-4b8331e0d10d5546bf2b0a2b368376e7b9d7548f" }}-ui_91f1adae63f46e6e66c3c656ac7d3575e9a107cc-{{ checksum ".buildcache/cache-keys/ui-91f1adae63f46e6e66c3c656ac7d3575e9a107cc" }}-static_24b2c191871f61aa3b8d496820c689ff4c60e495-{{ checksum ".buildcache/cache-keys/static-24b2c191871f61aa3b8d496820c689ff4c60e495" }}
          - buildcache-v1-base_02376a8228ddcfc3d014c896ea4897e75582221a-{{ checksum ".buildcache/cache-keys/base-02376a8228ddcfc3d014c896ea4897e75582221a" }}-yarn_4b8331e0d10d5546bf2b0a2b368376e7b9d7548f-{{ checksum ".buildcache/cache-keys/yarn-4b8331e0d10d5546bf2b0a2b368376e7b9d7548f" }}-ui_91f1adae63f46e6e66c3c656ac7d3575e9a107cc-{{ checksum ".buildcache/cache-keys/ui-91f1adae63f46e6e66c3c656ac7d3575e9a107cc" }}
          - buildcache-v1-base_02376a8228ddcfc3d014c896ea4897e75582221a-{{ checksum ".buildcache/cache-keys/base-02376a8228ddcfc3d014c896ea4897e75582221a" }}-yarn_4b8331e0d10d5546bf2b0a2b368376e7b9d7548f-{{ checksum ".buildcache/cache-keys/yarn-4b8331e0d10d5546bf2b0a2b368376e7b9d7548f" }}
          - buildcache-v1-base_02376a8228ddcfc3d014c896ea4897e75582221a-{{ checksum ".buildcache/cache-keys/base-02376a8228ddcfc3d014c896ea4897e75582221a" }}
      - restore_cache:
          key: 'package-{{checksum ".buildcache/cache-keys/package-274c2d659472a2c59ce257bf00b705aea142e36a"}}'
      - run: make -f release/layer.mk static_24b2c191871f61aa3b8d496820c689ff4c60e495-load || echo "No cached builder image to load."
      - run: make -C release package
      - run: ls -lahR dist/
      - store_artifacts:
          path: dist/public/vault_1.2.1-testbuild-sam
          destination: dist/public/vault_1.2.1-testbuild-sam
      # Save builder image cache.
      - save_cache:
          key: 'buildcache-v1-base_02376a8228ddcfc3d014c896ea4897e75582221a-{{ checksum ".buildcache/cache-keys/base-02376a8228ddcfc3d014c896ea4897e75582221a" }}-yarn_4b8331e0d10d5546bf2b0a2b368376e7b9d7548f-{{ checksum ".buildcache/cache-keys/yarn-4b8331e0d10d5546bf2b0a2b368376e7b9d7548f" }}-ui_91f1adae63f46e6e66c3c656ac7d3575e9a107cc-{{ checksum ".buildcache/cache-keys/ui-91f1adae63f46e6e66c3c656ac7d3575e9a107cc" }}-static_24b2c191871f61aa3b8d496820c689ff4c60e495-{{ checksum ".buildcache/cache-keys/static-24b2c191871f61aa3b8d496820c689ff4c60e495" }}'
          paths:
            - .buildcache/archives/static_24b2c191871f61aa3b8d496820c689ff4c60e495.tar.gz
      # Save package cache.
      - save_cache:
          key: 'package-{{checksum ".buildcache/cache-keys/package-274c2d659472a2c59ce257bf00b705aea142e36a"}}'
          paths:
            - dist/public/vault_1.2.1-testbuild-sam


