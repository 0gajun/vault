### ***
### WARNING: DO NOT manually EDIT or MERGE this file, it is generated by 'make .circleci/config/@build-release.yml'.
### INSTEAD: Edit or merge the source in packages-oss.lock/pkgs.yml .circleci/config/@build-release.yml.tpl then run 'make .circleci/config/@build-release.yml'.
### ***
# Current cache version: cache002

executors:
  releaser:
    docker:
      - image: circleci/buildpack-deps
    environment:
      PRODUCT_REVISION: "d6b3c72b3a31a52eb1fed388b182f973b8a21bd9"
      AUTO_INSTALL_TOOLS: 'YES'
    shell: /usr/bin/env bash -euo pipefail -c

workflows:
  build-d6b3c72b3a31a52eb1fed388b182f973b8a21bd9-cb922bde4d4d8e8a:
    jobs:
      - cache-builder-images:
          filters:
            branches:
              only:
                - /build-.*/
                - /ci.*/
      - darwin_386_package: { requires: [ cache-builder-images ] }
      - darwin_amd64_package: { requires: [ cache-builder-images ] }
      - freebsd_386_package: { requires: [ cache-builder-images ] }
      - freebsd_amd64_package: { requires: [ cache-builder-images ] }
      - freebsd_arm_package: { requires: [ cache-builder-images ] }
      - linux_386_package: { requires: [ cache-builder-images ] }
      - linux_amd64_package: { requires: [ cache-builder-images ] }
      - linux_arm_package: { requires: [ cache-builder-images ] }
      - linux_arm64_package: { requires: [ cache-builder-images ] }
      - netbsd_386_package: { requires: [ cache-builder-images ] }
      - netbsd_amd64_package: { requires: [ cache-builder-images ] }
      - openbsd_386_package: { requires: [ cache-builder-images ] }
      - openbsd_amd64_package: { requires: [ cache-builder-images ] }
      - solaris_amd64_package: { requires: [ cache-builder-images ] }
      - windows_386_package: { requires: [ cache-builder-images ] }
      - windows_amd64_package: { requires: [ cache-builder-images ] }
      - bundle-releases:
          requires:
            - darwin_386_package
            - darwin_amd64_package
            - freebsd_386_package
            - freebsd_amd64_package
            - freebsd_arm_package
            - linux_386_package
            - linux_amd64_package
            - linux_arm_package
            - linux_arm64_package
            - netbsd_386_package
            - netbsd_amd64_package
            - openbsd_386_package
            - openbsd_amd64_package
            - solaris_amd64_package
            - windows_386_package
            - windows_amd64_package
jobs:
  cache-builder-images:
    executor: releaser
    steps:
      - setup_remote_docker
      - checkout
      - write-build-layer-cache-keys

      # Load best available cached image.
      - restore_cache:
          keys:
            - cache002-build-static-assets_f0c7_{{checksum ".buildcache/cache-keys/build-static-assets-f0c7e41fbe00897b4f2c77833d798a8d09a70a61"}}
            - cache002-build-ui_b505_{{checksum ".buildcache/cache-keys/build-ui-b505fc9ef122cc39b043929934787ee4dda61865"}}
            - cache002-ui-dependencies_7c9e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c9efb820eeea32cc40cefb7b3388dedc09c63ff"}}
            - cache002-install-yarn_c339_{{checksum ".buildcache/cache-keys/install-yarn-c339f5b03553aaeeacf3f4309c45d37f98f25a1c"}}
            - cache002-set-workdir_21e5_{{checksum ".buildcache/cache-keys/set-workdir-21e545d015ed10a50a99ba0166267fb0f838949b"}}
            - cache002-install-go-tools_42a9_{{checksum ".buildcache/cache-keys/install-go-tools-42a954a0817769b2e682f77380cf9b3c2fc69ad5"}}
            - cache002-install-go_c61a_{{checksum ".buildcache/cache-keys/install-go-c61ac845c6c310143a06b7bff2465471876749f2"}}
            - cache002-base_06c7_{{checksum ".buildcache/cache-keys/base-06c792d6756fe70002ca3d73580e60e3f7ce80db"}}
      - run:
          name: Finish early if loaded exact match from cache.
          command: |
            if [ -f .buildcache/archives/07-build-static-assets-f0c7e41fbe00897b4f2c77833d798a8d09a70a61.tar.gz ]; then
              echo "Exact match found in cache, skipping build."
              circleci-agent step halt
            else
              echo "No exact match found, proceeding with build."
            fi
      - run: LAYER_SPEC_ID=07-build-static-assets-f0c7e41fbe00897b4f2c77833d798a8d09a70a61 make -C packages*.lock load-builder-cache

      # No exact match was found, so build each layer up to target type.
      - run: make -f packages*.lock/layer.mk 00-base-06c792d6756fe70002ca3d73580e60e3f7ce80db-image
      - run: make -f packages*.lock/layer.mk 01-install-go-c61ac845c6c310143a06b7bff2465471876749f2-image
      - run: make -f packages*.lock/layer.mk 02-install-go-tools-42a954a0817769b2e682f77380cf9b3c2fc69ad5-image
      - run: make -f packages*.lock/layer.mk 03-set-workdir-21e545d015ed10a50a99ba0166267fb0f838949b-image
      - run: make -f packages*.lock/layer.mk 04-install-yarn-c339f5b03553aaeeacf3f4309c45d37f98f25a1c-image
      - run: make -f packages*.lock/layer.mk 05-ui-dependencies-7c9efb820eeea32cc40cefb7b3388dedc09c63ff-image
      - run: make -f packages*.lock/layer.mk 06-build-ui-b505fc9ef122cc39b043929934787ee4dda61865-image
      - run: make -f packages*.lock/layer.mk 07-build-static-assets-f0c7e41fbe00897b4f2c77833d798a8d09a70a61-image

      # Save the target layer archive.
      
      - run: make -f packages*.lock/layer.mk 07-build-static-assets-f0c7e41fbe00897b4f2c77833d798a8d09a70a61-save
      
      # Store the target layer archive as all the relevant cache names.
      - save_cache:
          key: cache002-build-static-assets_f0c7_{{checksum ".buildcache/cache-keys/build-static-assets-f0c7e41fbe00897b4f2c77833d798a8d09a70a61"}}
          paths:
            - .buildcache/archives/07-build-static-assets-f0c7e41fbe00897b4f2c77833d798a8d09a70a61.tar.gz
      - run: mv .buildcache/archives/07-build-static-assets-f0c7e41fbe00897b4f2c77833d798a8d09a70a61.tar.gz .buildcache/archives/06-build-ui-b505fc9ef122cc39b043929934787ee4dda61865.tar.gz
      - save_cache:
          key: cache002-build-ui_b505_{{checksum ".buildcache/cache-keys/build-ui-b505fc9ef122cc39b043929934787ee4dda61865"}}
          paths:
            - .buildcache/archives/06-build-ui-b505fc9ef122cc39b043929934787ee4dda61865.tar.gz
      - run: mv .buildcache/archives/06-build-ui-b505fc9ef122cc39b043929934787ee4dda61865.tar.gz .buildcache/archives/05-ui-dependencies-7c9efb820eeea32cc40cefb7b3388dedc09c63ff.tar.gz
      - save_cache:
          key: cache002-ui-dependencies_7c9e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c9efb820eeea32cc40cefb7b3388dedc09c63ff"}}
          paths:
            - .buildcache/archives/05-ui-dependencies-7c9efb820eeea32cc40cefb7b3388dedc09c63ff.tar.gz
      - run: mv .buildcache/archives/05-ui-dependencies-7c9efb820eeea32cc40cefb7b3388dedc09c63ff.tar.gz .buildcache/archives/04-install-yarn-c339f5b03553aaeeacf3f4309c45d37f98f25a1c.tar.gz
      - save_cache:
          key: cache002-install-yarn_c339_{{checksum ".buildcache/cache-keys/install-yarn-c339f5b03553aaeeacf3f4309c45d37f98f25a1c"}}
          paths:
            - .buildcache/archives/04-install-yarn-c339f5b03553aaeeacf3f4309c45d37f98f25a1c.tar.gz
      - run: mv .buildcache/archives/04-install-yarn-c339f5b03553aaeeacf3f4309c45d37f98f25a1c.tar.gz .buildcache/archives/03-set-workdir-21e545d015ed10a50a99ba0166267fb0f838949b.tar.gz
      - save_cache:
          key: cache002-set-workdir_21e5_{{checksum ".buildcache/cache-keys/set-workdir-21e545d015ed10a50a99ba0166267fb0f838949b"}}
          paths:
            - .buildcache/archives/03-set-workdir-21e545d015ed10a50a99ba0166267fb0f838949b.tar.gz
      - run: mv .buildcache/archives/03-set-workdir-21e545d015ed10a50a99ba0166267fb0f838949b.tar.gz .buildcache/archives/02-install-go-tools-42a954a0817769b2e682f77380cf9b3c2fc69ad5.tar.gz
      - save_cache:
          key: cache002-install-go-tools_42a9_{{checksum ".buildcache/cache-keys/install-go-tools-42a954a0817769b2e682f77380cf9b3c2fc69ad5"}}
          paths:
            - .buildcache/archives/02-install-go-tools-42a954a0817769b2e682f77380cf9b3c2fc69ad5.tar.gz
      - run: mv .buildcache/archives/02-install-go-tools-42a954a0817769b2e682f77380cf9b3c2fc69ad5.tar.gz .buildcache/archives/01-install-go-c61ac845c6c310143a06b7bff2465471876749f2.tar.gz
      - save_cache:
          key: cache002-install-go_c61a_{{checksum ".buildcache/cache-keys/install-go-c61ac845c6c310143a06b7bff2465471876749f2"}}
          paths:
            - .buildcache/archives/01-install-go-c61ac845c6c310143a06b7bff2465471876749f2.tar.gz
      - run: mv .buildcache/archives/01-install-go-c61ac845c6c310143a06b7bff2465471876749f2.tar.gz .buildcache/archives/00-base-06c792d6756fe70002ca3d73580e60e3f7ce80db.tar.gz
      - save_cache:
          key: cache002-base_06c7_{{checksum ".buildcache/cache-keys/base-06c792d6756fe70002ca3d73580e60e3f7ce80db"}}
          paths:
            - .buildcache/archives/00-base-06c792d6756fe70002ca3d73580e60e3f7ce80db.tar.gz
  darwin_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 919bc5b002bffd765b8261b40aa27cacc534e4c7
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-919bc5b002bffd765b8261b40aa27cacc534e4c7-{{checksum ".buildcache/cache-keys/package-919bc5b002bffd765b8261b40aa27cacc534e4c7"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_6a83_{{checksum ".buildcache/cache-keys/copy-source-6a83b6b67a0ba87e0c7231bcdf7cc5ece8e6b463"}}
          - cache002-warm-go-build-vendor-cache_ba4c_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-ba4c8574a94b62f84393eca721ec376060c61a87"}}
          - cache002-build-static-assets_f0c7_{{checksum ".buildcache/cache-keys/build-static-assets-f0c7e41fbe00897b4f2c77833d798a8d09a70a61"}}
          - cache002-build-ui_b505_{{checksum ".buildcache/cache-keys/build-ui-b505fc9ef122cc39b043929934787ee4dda61865"}}
          - cache002-ui-dependencies_7c9e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c9efb820eeea32cc40cefb7b3388dedc09c63ff"}}
          - cache002-install-yarn_c339_{{checksum ".buildcache/cache-keys/install-yarn-c339f5b03553aaeeacf3f4309c45d37f98f25a1c"}}
          - cache002-set-workdir_21e5_{{checksum ".buildcache/cache-keys/set-workdir-21e545d015ed10a50a99ba0166267fb0f838949b"}}
          - cache002-install-go-tools_42a9_{{checksum ".buildcache/cache-keys/install-go-tools-42a954a0817769b2e682f77380cf9b3c2fc69ad5"}}
          - cache002-install-go_c61a_{{checksum ".buildcache/cache-keys/install-go-c61ac845c6c310143a06b7bff2465471876749f2"}}
          - cache002-base_06c7_{{checksum ".buildcache/cache-keys/base-06c792d6756fe70002ca3d73580e60e3f7ce80db"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-919bc5b002bffd765b8261b40aa27cacc534e4c7-{{checksum ".buildcache/cache-keys/package-919bc5b002bffd765b8261b40aa27cacc534e4c7"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-ba4c8574a94b62f84393eca721ec376060c61a87.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-ba4c8574a94b62f84393eca721ec376060c61a87-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_ba4c_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-ba4c8574a94b62f84393eca721ec376060c61a87"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-ba4c8574a94b62f84393eca721ec376060c61a87.tar.gz

  darwin_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: c006aa3c2e9cb421217fc195a8b5fe1493c99dfc
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-c006aa3c2e9cb421217fc195a8b5fe1493c99dfc-{{checksum ".buildcache/cache-keys/package-c006aa3c2e9cb421217fc195a8b5fe1493c99dfc"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_2b13_{{checksum ".buildcache/cache-keys/copy-source-2b13fe045ae3f2f40cf6e81a43ff2097be1769ca"}}
          - cache002-warm-go-build-vendor-cache_6a96_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-6a965e749860704eedf01d920fcec1ed02ad0702"}}
          - cache002-build-static-assets_f0c7_{{checksum ".buildcache/cache-keys/build-static-assets-f0c7e41fbe00897b4f2c77833d798a8d09a70a61"}}
          - cache002-build-ui_b505_{{checksum ".buildcache/cache-keys/build-ui-b505fc9ef122cc39b043929934787ee4dda61865"}}
          - cache002-ui-dependencies_7c9e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c9efb820eeea32cc40cefb7b3388dedc09c63ff"}}
          - cache002-install-yarn_c339_{{checksum ".buildcache/cache-keys/install-yarn-c339f5b03553aaeeacf3f4309c45d37f98f25a1c"}}
          - cache002-set-workdir_21e5_{{checksum ".buildcache/cache-keys/set-workdir-21e545d015ed10a50a99ba0166267fb0f838949b"}}
          - cache002-install-go-tools_42a9_{{checksum ".buildcache/cache-keys/install-go-tools-42a954a0817769b2e682f77380cf9b3c2fc69ad5"}}
          - cache002-install-go_c61a_{{checksum ".buildcache/cache-keys/install-go-c61ac845c6c310143a06b7bff2465471876749f2"}}
          - cache002-base_06c7_{{checksum ".buildcache/cache-keys/base-06c792d6756fe70002ca3d73580e60e3f7ce80db"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-c006aa3c2e9cb421217fc195a8b5fe1493c99dfc-{{checksum ".buildcache/cache-keys/package-c006aa3c2e9cb421217fc195a8b5fe1493c99dfc"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-6a965e749860704eedf01d920fcec1ed02ad0702.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-6a965e749860704eedf01d920fcec1ed02ad0702-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_6a96_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-6a965e749860704eedf01d920fcec1ed02ad0702"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-6a965e749860704eedf01d920fcec1ed02ad0702.tar.gz

  freebsd_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 4c3dbe7adf549efddb686e9bf6cc8666b81efce8
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-4c3dbe7adf549efddb686e9bf6cc8666b81efce8-{{checksum ".buildcache/cache-keys/package-4c3dbe7adf549efddb686e9bf6cc8666b81efce8"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_db9e_{{checksum ".buildcache/cache-keys/copy-source-db9ec35e19f116d31e625e32bb11798779115abe"}}
          - cache002-warm-go-build-vendor-cache_62e5_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-62e57c000a2cc93377f871ea90eb42e8036e09c7"}}
          - cache002-build-static-assets_f0c7_{{checksum ".buildcache/cache-keys/build-static-assets-f0c7e41fbe00897b4f2c77833d798a8d09a70a61"}}
          - cache002-build-ui_b505_{{checksum ".buildcache/cache-keys/build-ui-b505fc9ef122cc39b043929934787ee4dda61865"}}
          - cache002-ui-dependencies_7c9e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c9efb820eeea32cc40cefb7b3388dedc09c63ff"}}
          - cache002-install-yarn_c339_{{checksum ".buildcache/cache-keys/install-yarn-c339f5b03553aaeeacf3f4309c45d37f98f25a1c"}}
          - cache002-set-workdir_21e5_{{checksum ".buildcache/cache-keys/set-workdir-21e545d015ed10a50a99ba0166267fb0f838949b"}}
          - cache002-install-go-tools_42a9_{{checksum ".buildcache/cache-keys/install-go-tools-42a954a0817769b2e682f77380cf9b3c2fc69ad5"}}
          - cache002-install-go_c61a_{{checksum ".buildcache/cache-keys/install-go-c61ac845c6c310143a06b7bff2465471876749f2"}}
          - cache002-base_06c7_{{checksum ".buildcache/cache-keys/base-06c792d6756fe70002ca3d73580e60e3f7ce80db"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-4c3dbe7adf549efddb686e9bf6cc8666b81efce8-{{checksum ".buildcache/cache-keys/package-4c3dbe7adf549efddb686e9bf6cc8666b81efce8"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-62e57c000a2cc93377f871ea90eb42e8036e09c7.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-62e57c000a2cc93377f871ea90eb42e8036e09c7-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_62e5_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-62e57c000a2cc93377f871ea90eb42e8036e09c7"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-62e57c000a2cc93377f871ea90eb42e8036e09c7.tar.gz

  freebsd_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: ebd8f741e36e971bf8906228a9d861e66061acd7
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-ebd8f741e36e971bf8906228a9d861e66061acd7-{{checksum ".buildcache/cache-keys/package-ebd8f741e36e971bf8906228a9d861e66061acd7"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_2983_{{checksum ".buildcache/cache-keys/copy-source-29839f4c590765710e74a7a6b10df72d593e2bc8"}}
          - cache002-warm-go-build-vendor-cache_3fee_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-3fee832ef2db93ad505ed7812fea4326356e2ded"}}
          - cache002-build-static-assets_f0c7_{{checksum ".buildcache/cache-keys/build-static-assets-f0c7e41fbe00897b4f2c77833d798a8d09a70a61"}}
          - cache002-build-ui_b505_{{checksum ".buildcache/cache-keys/build-ui-b505fc9ef122cc39b043929934787ee4dda61865"}}
          - cache002-ui-dependencies_7c9e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c9efb820eeea32cc40cefb7b3388dedc09c63ff"}}
          - cache002-install-yarn_c339_{{checksum ".buildcache/cache-keys/install-yarn-c339f5b03553aaeeacf3f4309c45d37f98f25a1c"}}
          - cache002-set-workdir_21e5_{{checksum ".buildcache/cache-keys/set-workdir-21e545d015ed10a50a99ba0166267fb0f838949b"}}
          - cache002-install-go-tools_42a9_{{checksum ".buildcache/cache-keys/install-go-tools-42a954a0817769b2e682f77380cf9b3c2fc69ad5"}}
          - cache002-install-go_c61a_{{checksum ".buildcache/cache-keys/install-go-c61ac845c6c310143a06b7bff2465471876749f2"}}
          - cache002-base_06c7_{{checksum ".buildcache/cache-keys/base-06c792d6756fe70002ca3d73580e60e3f7ce80db"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-ebd8f741e36e971bf8906228a9d861e66061acd7-{{checksum ".buildcache/cache-keys/package-ebd8f741e36e971bf8906228a9d861e66061acd7"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-3fee832ef2db93ad505ed7812fea4326356e2ded.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-3fee832ef2db93ad505ed7812fea4326356e2ded-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_3fee_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-3fee832ef2db93ad505ed7812fea4326356e2ded"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-3fee832ef2db93ad505ed7812fea4326356e2ded.tar.gz

  freebsd_arm_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 43b2f6068201dec5d833e3ac29bf03d46e5060cf
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-43b2f6068201dec5d833e3ac29bf03d46e5060cf-{{checksum ".buildcache/cache-keys/package-43b2f6068201dec5d833e3ac29bf03d46e5060cf"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_6212_{{checksum ".buildcache/cache-keys/copy-source-62122d34c3cacd2890ae25a0b0bdb839b7839b8a"}}
          - cache002-warm-go-build-vendor-cache_f5a2_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-f5a26f8569f2c62527e3af00f03c0e59f5fb4051"}}
          - cache002-build-static-assets_f0c7_{{checksum ".buildcache/cache-keys/build-static-assets-f0c7e41fbe00897b4f2c77833d798a8d09a70a61"}}
          - cache002-build-ui_b505_{{checksum ".buildcache/cache-keys/build-ui-b505fc9ef122cc39b043929934787ee4dda61865"}}
          - cache002-ui-dependencies_7c9e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c9efb820eeea32cc40cefb7b3388dedc09c63ff"}}
          - cache002-install-yarn_c339_{{checksum ".buildcache/cache-keys/install-yarn-c339f5b03553aaeeacf3f4309c45d37f98f25a1c"}}
          - cache002-set-workdir_21e5_{{checksum ".buildcache/cache-keys/set-workdir-21e545d015ed10a50a99ba0166267fb0f838949b"}}
          - cache002-install-go-tools_42a9_{{checksum ".buildcache/cache-keys/install-go-tools-42a954a0817769b2e682f77380cf9b3c2fc69ad5"}}
          - cache002-install-go_c61a_{{checksum ".buildcache/cache-keys/install-go-c61ac845c6c310143a06b7bff2465471876749f2"}}
          - cache002-base_06c7_{{checksum ".buildcache/cache-keys/base-06c792d6756fe70002ca3d73580e60e3f7ce80db"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-43b2f6068201dec5d833e3ac29bf03d46e5060cf-{{checksum ".buildcache/cache-keys/package-43b2f6068201dec5d833e3ac29bf03d46e5060cf"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-f5a26f8569f2c62527e3af00f03c0e59f5fb4051.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-f5a26f8569f2c62527e3af00f03c0e59f5fb4051-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_f5a2_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-f5a26f8569f2c62527e3af00f03c0e59f5fb4051"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-f5a26f8569f2c62527e3af00f03c0e59f5fb4051.tar.gz

  linux_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 05d375f6d19e5284869d00e7120b71a223b3b967
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-05d375f6d19e5284869d00e7120b71a223b3b967-{{checksum ".buildcache/cache-keys/package-05d375f6d19e5284869d00e7120b71a223b3b967"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_7ae2_{{checksum ".buildcache/cache-keys/copy-source-7ae2958cfd547de13e89b21546d7e3b7f254a5f0"}}
          - cache002-warm-go-build-vendor-cache_78ed_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-78edb5ae764d9fb3d24c274b23f29a1e127b07a0"}}
          - cache002-build-static-assets_f0c7_{{checksum ".buildcache/cache-keys/build-static-assets-f0c7e41fbe00897b4f2c77833d798a8d09a70a61"}}
          - cache002-build-ui_b505_{{checksum ".buildcache/cache-keys/build-ui-b505fc9ef122cc39b043929934787ee4dda61865"}}
          - cache002-ui-dependencies_7c9e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c9efb820eeea32cc40cefb7b3388dedc09c63ff"}}
          - cache002-install-yarn_c339_{{checksum ".buildcache/cache-keys/install-yarn-c339f5b03553aaeeacf3f4309c45d37f98f25a1c"}}
          - cache002-set-workdir_21e5_{{checksum ".buildcache/cache-keys/set-workdir-21e545d015ed10a50a99ba0166267fb0f838949b"}}
          - cache002-install-go-tools_42a9_{{checksum ".buildcache/cache-keys/install-go-tools-42a954a0817769b2e682f77380cf9b3c2fc69ad5"}}
          - cache002-install-go_c61a_{{checksum ".buildcache/cache-keys/install-go-c61ac845c6c310143a06b7bff2465471876749f2"}}
          - cache002-base_06c7_{{checksum ".buildcache/cache-keys/base-06c792d6756fe70002ca3d73580e60e3f7ce80db"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-05d375f6d19e5284869d00e7120b71a223b3b967-{{checksum ".buildcache/cache-keys/package-05d375f6d19e5284869d00e7120b71a223b3b967"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-78edb5ae764d9fb3d24c274b23f29a1e127b07a0.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-78edb5ae764d9fb3d24c274b23f29a1e127b07a0-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_78ed_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-78edb5ae764d9fb3d24c274b23f29a1e127b07a0"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-78edb5ae764d9fb3d24c274b23f29a1e127b07a0.tar.gz

  linux_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: aea2aa1ce7ea5821f6c53c4f5cafab923231e8b6
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-aea2aa1ce7ea5821f6c53c4f5cafab923231e8b6-{{checksum ".buildcache/cache-keys/package-aea2aa1ce7ea5821f6c53c4f5cafab923231e8b6"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_6032_{{checksum ".buildcache/cache-keys/copy-source-6032ecf2dd0609b6f44d1e9d1e67faa7c665f82e"}}
          - cache002-warm-go-build-vendor-cache_032b_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-032b91ddc0ae8182fa6d532c421733225892ad85"}}
          - cache002-build-static-assets_f0c7_{{checksum ".buildcache/cache-keys/build-static-assets-f0c7e41fbe00897b4f2c77833d798a8d09a70a61"}}
          - cache002-build-ui_b505_{{checksum ".buildcache/cache-keys/build-ui-b505fc9ef122cc39b043929934787ee4dda61865"}}
          - cache002-ui-dependencies_7c9e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c9efb820eeea32cc40cefb7b3388dedc09c63ff"}}
          - cache002-install-yarn_c339_{{checksum ".buildcache/cache-keys/install-yarn-c339f5b03553aaeeacf3f4309c45d37f98f25a1c"}}
          - cache002-set-workdir_21e5_{{checksum ".buildcache/cache-keys/set-workdir-21e545d015ed10a50a99ba0166267fb0f838949b"}}
          - cache002-install-go-tools_42a9_{{checksum ".buildcache/cache-keys/install-go-tools-42a954a0817769b2e682f77380cf9b3c2fc69ad5"}}
          - cache002-install-go_c61a_{{checksum ".buildcache/cache-keys/install-go-c61ac845c6c310143a06b7bff2465471876749f2"}}
          - cache002-base_06c7_{{checksum ".buildcache/cache-keys/base-06c792d6756fe70002ca3d73580e60e3f7ce80db"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-aea2aa1ce7ea5821f6c53c4f5cafab923231e8b6-{{checksum ".buildcache/cache-keys/package-aea2aa1ce7ea5821f6c53c4f5cafab923231e8b6"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-032b91ddc0ae8182fa6d532c421733225892ad85.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-032b91ddc0ae8182fa6d532c421733225892ad85-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_032b_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-032b91ddc0ae8182fa6d532c421733225892ad85"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-032b91ddc0ae8182fa6d532c421733225892ad85.tar.gz

  linux_arm_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: c3fdbe38d3bc9b7554715738a9a25fc311f6a5df
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-c3fdbe38d3bc9b7554715738a9a25fc311f6a5df-{{checksum ".buildcache/cache-keys/package-c3fdbe38d3bc9b7554715738a9a25fc311f6a5df"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_63e6_{{checksum ".buildcache/cache-keys/copy-source-63e635b234bc4de8c637daf8588ed8d861c9c4d6"}}
          - cache002-warm-go-build-vendor-cache_2686_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-268663c8d65759da13a23cf749140b6f1367622a"}}
          - cache002-build-static-assets_f0c7_{{checksum ".buildcache/cache-keys/build-static-assets-f0c7e41fbe00897b4f2c77833d798a8d09a70a61"}}
          - cache002-build-ui_b505_{{checksum ".buildcache/cache-keys/build-ui-b505fc9ef122cc39b043929934787ee4dda61865"}}
          - cache002-ui-dependencies_7c9e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c9efb820eeea32cc40cefb7b3388dedc09c63ff"}}
          - cache002-install-yarn_c339_{{checksum ".buildcache/cache-keys/install-yarn-c339f5b03553aaeeacf3f4309c45d37f98f25a1c"}}
          - cache002-set-workdir_21e5_{{checksum ".buildcache/cache-keys/set-workdir-21e545d015ed10a50a99ba0166267fb0f838949b"}}
          - cache002-install-go-tools_42a9_{{checksum ".buildcache/cache-keys/install-go-tools-42a954a0817769b2e682f77380cf9b3c2fc69ad5"}}
          - cache002-install-go_c61a_{{checksum ".buildcache/cache-keys/install-go-c61ac845c6c310143a06b7bff2465471876749f2"}}
          - cache002-base_06c7_{{checksum ".buildcache/cache-keys/base-06c792d6756fe70002ca3d73580e60e3f7ce80db"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-c3fdbe38d3bc9b7554715738a9a25fc311f6a5df-{{checksum ".buildcache/cache-keys/package-c3fdbe38d3bc9b7554715738a9a25fc311f6a5df"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-268663c8d65759da13a23cf749140b6f1367622a.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-268663c8d65759da13a23cf749140b6f1367622a-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_2686_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-268663c8d65759da13a23cf749140b6f1367622a"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-268663c8d65759da13a23cf749140b6f1367622a.tar.gz

  linux_arm64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: b1cd02e155f42b9286938d330b86d891f8403698
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-b1cd02e155f42b9286938d330b86d891f8403698-{{checksum ".buildcache/cache-keys/package-b1cd02e155f42b9286938d330b86d891f8403698"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_3453_{{checksum ".buildcache/cache-keys/copy-source-345300584fdc348d6228056b2172a60dca2ac991"}}
          - cache002-warm-go-build-vendor-cache_a00c_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-a00c9f111286462c14ece4dfd39823353e7df7f4"}}
          - cache002-build-static-assets_f0c7_{{checksum ".buildcache/cache-keys/build-static-assets-f0c7e41fbe00897b4f2c77833d798a8d09a70a61"}}
          - cache002-build-ui_b505_{{checksum ".buildcache/cache-keys/build-ui-b505fc9ef122cc39b043929934787ee4dda61865"}}
          - cache002-ui-dependencies_7c9e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c9efb820eeea32cc40cefb7b3388dedc09c63ff"}}
          - cache002-install-yarn_c339_{{checksum ".buildcache/cache-keys/install-yarn-c339f5b03553aaeeacf3f4309c45d37f98f25a1c"}}
          - cache002-set-workdir_21e5_{{checksum ".buildcache/cache-keys/set-workdir-21e545d015ed10a50a99ba0166267fb0f838949b"}}
          - cache002-install-go-tools_42a9_{{checksum ".buildcache/cache-keys/install-go-tools-42a954a0817769b2e682f77380cf9b3c2fc69ad5"}}
          - cache002-install-go_c61a_{{checksum ".buildcache/cache-keys/install-go-c61ac845c6c310143a06b7bff2465471876749f2"}}
          - cache002-base_06c7_{{checksum ".buildcache/cache-keys/base-06c792d6756fe70002ca3d73580e60e3f7ce80db"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-b1cd02e155f42b9286938d330b86d891f8403698-{{checksum ".buildcache/cache-keys/package-b1cd02e155f42b9286938d330b86d891f8403698"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-a00c9f111286462c14ece4dfd39823353e7df7f4.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-a00c9f111286462c14ece4dfd39823353e7df7f4-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_a00c_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-a00c9f111286462c14ece4dfd39823353e7df7f4"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-a00c9f111286462c14ece4dfd39823353e7df7f4.tar.gz

  netbsd_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 7b268b6eedd728149b922372945271689c30005a
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-7b268b6eedd728149b922372945271689c30005a-{{checksum ".buildcache/cache-keys/package-7b268b6eedd728149b922372945271689c30005a"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_7950_{{checksum ".buildcache/cache-keys/copy-source-7950c849dbe00c1df5c131c6e7d68b7436862df8"}}
          - cache002-warm-go-build-vendor-cache_cb7a_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-cb7ac84996633d9e4e3567c8a5c0e0e4f6fbeefa"}}
          - cache002-build-static-assets_f0c7_{{checksum ".buildcache/cache-keys/build-static-assets-f0c7e41fbe00897b4f2c77833d798a8d09a70a61"}}
          - cache002-build-ui_b505_{{checksum ".buildcache/cache-keys/build-ui-b505fc9ef122cc39b043929934787ee4dda61865"}}
          - cache002-ui-dependencies_7c9e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c9efb820eeea32cc40cefb7b3388dedc09c63ff"}}
          - cache002-install-yarn_c339_{{checksum ".buildcache/cache-keys/install-yarn-c339f5b03553aaeeacf3f4309c45d37f98f25a1c"}}
          - cache002-set-workdir_21e5_{{checksum ".buildcache/cache-keys/set-workdir-21e545d015ed10a50a99ba0166267fb0f838949b"}}
          - cache002-install-go-tools_42a9_{{checksum ".buildcache/cache-keys/install-go-tools-42a954a0817769b2e682f77380cf9b3c2fc69ad5"}}
          - cache002-install-go_c61a_{{checksum ".buildcache/cache-keys/install-go-c61ac845c6c310143a06b7bff2465471876749f2"}}
          - cache002-base_06c7_{{checksum ".buildcache/cache-keys/base-06c792d6756fe70002ca3d73580e60e3f7ce80db"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-7b268b6eedd728149b922372945271689c30005a-{{checksum ".buildcache/cache-keys/package-7b268b6eedd728149b922372945271689c30005a"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-cb7ac84996633d9e4e3567c8a5c0e0e4f6fbeefa.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-cb7ac84996633d9e4e3567c8a5c0e0e4f6fbeefa-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_cb7a_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-cb7ac84996633d9e4e3567c8a5c0e0e4f6fbeefa"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-cb7ac84996633d9e4e3567c8a5c0e0e4f6fbeefa.tar.gz

  netbsd_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 3dd48d63601afe776f90de8d28afae11e1b6face
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-3dd48d63601afe776f90de8d28afae11e1b6face-{{checksum ".buildcache/cache-keys/package-3dd48d63601afe776f90de8d28afae11e1b6face"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_76b2_{{checksum ".buildcache/cache-keys/copy-source-76b268d2f4023a80393149c16caa2a8d9750c34d"}}
          - cache002-warm-go-build-vendor-cache_725c_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-725c75d6985e5e7d3753284a34f184cacf9d874d"}}
          - cache002-build-static-assets_f0c7_{{checksum ".buildcache/cache-keys/build-static-assets-f0c7e41fbe00897b4f2c77833d798a8d09a70a61"}}
          - cache002-build-ui_b505_{{checksum ".buildcache/cache-keys/build-ui-b505fc9ef122cc39b043929934787ee4dda61865"}}
          - cache002-ui-dependencies_7c9e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c9efb820eeea32cc40cefb7b3388dedc09c63ff"}}
          - cache002-install-yarn_c339_{{checksum ".buildcache/cache-keys/install-yarn-c339f5b03553aaeeacf3f4309c45d37f98f25a1c"}}
          - cache002-set-workdir_21e5_{{checksum ".buildcache/cache-keys/set-workdir-21e545d015ed10a50a99ba0166267fb0f838949b"}}
          - cache002-install-go-tools_42a9_{{checksum ".buildcache/cache-keys/install-go-tools-42a954a0817769b2e682f77380cf9b3c2fc69ad5"}}
          - cache002-install-go_c61a_{{checksum ".buildcache/cache-keys/install-go-c61ac845c6c310143a06b7bff2465471876749f2"}}
          - cache002-base_06c7_{{checksum ".buildcache/cache-keys/base-06c792d6756fe70002ca3d73580e60e3f7ce80db"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-3dd48d63601afe776f90de8d28afae11e1b6face-{{checksum ".buildcache/cache-keys/package-3dd48d63601afe776f90de8d28afae11e1b6face"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-725c75d6985e5e7d3753284a34f184cacf9d874d.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-725c75d6985e5e7d3753284a34f184cacf9d874d-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_725c_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-725c75d6985e5e7d3753284a34f184cacf9d874d"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-725c75d6985e5e7d3753284a34f184cacf9d874d.tar.gz

  openbsd_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: cb687fc98fc393f1c7b504453f00a950041b8aae
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-cb687fc98fc393f1c7b504453f00a950041b8aae-{{checksum ".buildcache/cache-keys/package-cb687fc98fc393f1c7b504453f00a950041b8aae"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_b8a0_{{checksum ".buildcache/cache-keys/copy-source-b8a080ba4975682ce46de550f874b455f654ee63"}}
          - cache002-warm-go-build-vendor-cache_3fee_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-3feecebc624f778cb2fc1f0f8a948c66dcd45b3d"}}
          - cache002-build-static-assets_f0c7_{{checksum ".buildcache/cache-keys/build-static-assets-f0c7e41fbe00897b4f2c77833d798a8d09a70a61"}}
          - cache002-build-ui_b505_{{checksum ".buildcache/cache-keys/build-ui-b505fc9ef122cc39b043929934787ee4dda61865"}}
          - cache002-ui-dependencies_7c9e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c9efb820eeea32cc40cefb7b3388dedc09c63ff"}}
          - cache002-install-yarn_c339_{{checksum ".buildcache/cache-keys/install-yarn-c339f5b03553aaeeacf3f4309c45d37f98f25a1c"}}
          - cache002-set-workdir_21e5_{{checksum ".buildcache/cache-keys/set-workdir-21e545d015ed10a50a99ba0166267fb0f838949b"}}
          - cache002-install-go-tools_42a9_{{checksum ".buildcache/cache-keys/install-go-tools-42a954a0817769b2e682f77380cf9b3c2fc69ad5"}}
          - cache002-install-go_c61a_{{checksum ".buildcache/cache-keys/install-go-c61ac845c6c310143a06b7bff2465471876749f2"}}
          - cache002-base_06c7_{{checksum ".buildcache/cache-keys/base-06c792d6756fe70002ca3d73580e60e3f7ce80db"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-cb687fc98fc393f1c7b504453f00a950041b8aae-{{checksum ".buildcache/cache-keys/package-cb687fc98fc393f1c7b504453f00a950041b8aae"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-3feecebc624f778cb2fc1f0f8a948c66dcd45b3d.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-3feecebc624f778cb2fc1f0f8a948c66dcd45b3d-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_3fee_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-3feecebc624f778cb2fc1f0f8a948c66dcd45b3d"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-3feecebc624f778cb2fc1f0f8a948c66dcd45b3d.tar.gz

  openbsd_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 53d456926f97eab2ea230c6c5259383f3af60465
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-53d456926f97eab2ea230c6c5259383f3af60465-{{checksum ".buildcache/cache-keys/package-53d456926f97eab2ea230c6c5259383f3af60465"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_13d0_{{checksum ".buildcache/cache-keys/copy-source-13d04c597d48fd5cb6ee8c8a7c4cc34e520a166e"}}
          - cache002-warm-go-build-vendor-cache_54e5_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-54e5ea91eddc0da639dd00f32e4c6d555473258a"}}
          - cache002-build-static-assets_f0c7_{{checksum ".buildcache/cache-keys/build-static-assets-f0c7e41fbe00897b4f2c77833d798a8d09a70a61"}}
          - cache002-build-ui_b505_{{checksum ".buildcache/cache-keys/build-ui-b505fc9ef122cc39b043929934787ee4dda61865"}}
          - cache002-ui-dependencies_7c9e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c9efb820eeea32cc40cefb7b3388dedc09c63ff"}}
          - cache002-install-yarn_c339_{{checksum ".buildcache/cache-keys/install-yarn-c339f5b03553aaeeacf3f4309c45d37f98f25a1c"}}
          - cache002-set-workdir_21e5_{{checksum ".buildcache/cache-keys/set-workdir-21e545d015ed10a50a99ba0166267fb0f838949b"}}
          - cache002-install-go-tools_42a9_{{checksum ".buildcache/cache-keys/install-go-tools-42a954a0817769b2e682f77380cf9b3c2fc69ad5"}}
          - cache002-install-go_c61a_{{checksum ".buildcache/cache-keys/install-go-c61ac845c6c310143a06b7bff2465471876749f2"}}
          - cache002-base_06c7_{{checksum ".buildcache/cache-keys/base-06c792d6756fe70002ca3d73580e60e3f7ce80db"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-53d456926f97eab2ea230c6c5259383f3af60465-{{checksum ".buildcache/cache-keys/package-53d456926f97eab2ea230c6c5259383f3af60465"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-54e5ea91eddc0da639dd00f32e4c6d555473258a.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-54e5ea91eddc0da639dd00f32e4c6d555473258a-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_54e5_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-54e5ea91eddc0da639dd00f32e4c6d555473258a"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-54e5ea91eddc0da639dd00f32e4c6d555473258a.tar.gz

  solaris_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 6fc000f07f800a0a6436eaa06d23bd76ff6063fa
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-6fc000f07f800a0a6436eaa06d23bd76ff6063fa-{{checksum ".buildcache/cache-keys/package-6fc000f07f800a0a6436eaa06d23bd76ff6063fa"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_4ef8_{{checksum ".buildcache/cache-keys/copy-source-4ef81023afa7509841122a9a272ac20798c66c2a"}}
          - cache002-warm-go-build-vendor-cache_4ff9_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-4ff912699e842bcc531736f61a283a5a27942066"}}
          - cache002-build-static-assets_f0c7_{{checksum ".buildcache/cache-keys/build-static-assets-f0c7e41fbe00897b4f2c77833d798a8d09a70a61"}}
          - cache002-build-ui_b505_{{checksum ".buildcache/cache-keys/build-ui-b505fc9ef122cc39b043929934787ee4dda61865"}}
          - cache002-ui-dependencies_7c9e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c9efb820eeea32cc40cefb7b3388dedc09c63ff"}}
          - cache002-install-yarn_c339_{{checksum ".buildcache/cache-keys/install-yarn-c339f5b03553aaeeacf3f4309c45d37f98f25a1c"}}
          - cache002-set-workdir_21e5_{{checksum ".buildcache/cache-keys/set-workdir-21e545d015ed10a50a99ba0166267fb0f838949b"}}
          - cache002-install-go-tools_42a9_{{checksum ".buildcache/cache-keys/install-go-tools-42a954a0817769b2e682f77380cf9b3c2fc69ad5"}}
          - cache002-install-go_c61a_{{checksum ".buildcache/cache-keys/install-go-c61ac845c6c310143a06b7bff2465471876749f2"}}
          - cache002-base_06c7_{{checksum ".buildcache/cache-keys/base-06c792d6756fe70002ca3d73580e60e3f7ce80db"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-6fc000f07f800a0a6436eaa06d23bd76ff6063fa-{{checksum ".buildcache/cache-keys/package-6fc000f07f800a0a6436eaa06d23bd76ff6063fa"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-4ff912699e842bcc531736f61a283a5a27942066.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-4ff912699e842bcc531736f61a283a5a27942066-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_4ff9_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-4ff912699e842bcc531736f61a283a5a27942066"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-4ff912699e842bcc531736f61a283a5a27942066.tar.gz

  windows_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 8c6e9720cd437446bdac6a6e5c636ff0520ff668
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-8c6e9720cd437446bdac6a6e5c636ff0520ff668-{{checksum ".buildcache/cache-keys/package-8c6e9720cd437446bdac6a6e5c636ff0520ff668"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_86a5_{{checksum ".buildcache/cache-keys/copy-source-86a5154ca27d0f0135190c6e9dae568bdd639b20"}}
          - cache002-warm-go-build-vendor-cache_b3a8_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-b3a83eb7a6ad63fdc732e658d909f0cf8a567777"}}
          - cache002-build-static-assets_f0c7_{{checksum ".buildcache/cache-keys/build-static-assets-f0c7e41fbe00897b4f2c77833d798a8d09a70a61"}}
          - cache002-build-ui_b505_{{checksum ".buildcache/cache-keys/build-ui-b505fc9ef122cc39b043929934787ee4dda61865"}}
          - cache002-ui-dependencies_7c9e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c9efb820eeea32cc40cefb7b3388dedc09c63ff"}}
          - cache002-install-yarn_c339_{{checksum ".buildcache/cache-keys/install-yarn-c339f5b03553aaeeacf3f4309c45d37f98f25a1c"}}
          - cache002-set-workdir_21e5_{{checksum ".buildcache/cache-keys/set-workdir-21e545d015ed10a50a99ba0166267fb0f838949b"}}
          - cache002-install-go-tools_42a9_{{checksum ".buildcache/cache-keys/install-go-tools-42a954a0817769b2e682f77380cf9b3c2fc69ad5"}}
          - cache002-install-go_c61a_{{checksum ".buildcache/cache-keys/install-go-c61ac845c6c310143a06b7bff2465471876749f2"}}
          - cache002-base_06c7_{{checksum ".buildcache/cache-keys/base-06c792d6756fe70002ca3d73580e60e3f7ce80db"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-8c6e9720cd437446bdac6a6e5c636ff0520ff668-{{checksum ".buildcache/cache-keys/package-8c6e9720cd437446bdac6a6e5c636ff0520ff668"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-b3a83eb7a6ad63fdc732e658d909f0cf8a567777.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-b3a83eb7a6ad63fdc732e658d909f0cf8a567777-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_b3a8_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-b3a83eb7a6ad63fdc732e658d909f0cf8a567777"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-b3a83eb7a6ad63fdc732e658d909f0cf8a567777.tar.gz

  windows_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: b937c11f50b01fd9efc300a17a18721c10c31117
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-b937c11f50b01fd9efc300a17a18721c10c31117-{{checksum ".buildcache/cache-keys/package-b937c11f50b01fd9efc300a17a18721c10c31117"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_b0f1_{{checksum ".buildcache/cache-keys/copy-source-b0f1f03d196a2c8936d320cf7b8d01206f1db7bb"}}
          - cache002-warm-go-build-vendor-cache_9bf4_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-9bf415a96782a1b148ad9d848188ade89b7fbf1c"}}
          - cache002-build-static-assets_f0c7_{{checksum ".buildcache/cache-keys/build-static-assets-f0c7e41fbe00897b4f2c77833d798a8d09a70a61"}}
          - cache002-build-ui_b505_{{checksum ".buildcache/cache-keys/build-ui-b505fc9ef122cc39b043929934787ee4dda61865"}}
          - cache002-ui-dependencies_7c9e_{{checksum ".buildcache/cache-keys/ui-dependencies-7c9efb820eeea32cc40cefb7b3388dedc09c63ff"}}
          - cache002-install-yarn_c339_{{checksum ".buildcache/cache-keys/install-yarn-c339f5b03553aaeeacf3f4309c45d37f98f25a1c"}}
          - cache002-set-workdir_21e5_{{checksum ".buildcache/cache-keys/set-workdir-21e545d015ed10a50a99ba0166267fb0f838949b"}}
          - cache002-install-go-tools_42a9_{{checksum ".buildcache/cache-keys/install-go-tools-42a954a0817769b2e682f77380cf9b3c2fc69ad5"}}
          - cache002-install-go_c61a_{{checksum ".buildcache/cache-keys/install-go-c61ac845c6c310143a06b7bff2465471876749f2"}}
          - cache002-base_06c7_{{checksum ".buildcache/cache-keys/base-06c792d6756fe70002ca3d73580e60e3f7ce80db"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-b937c11f50b01fd9efc300a17a18721c10c31117-{{checksum ".buildcache/cache-keys/package-b937c11f50b01fd9efc300a17a18721c10c31117"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-9bf415a96782a1b148ad9d848188ade89b7fbf1c.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-9bf415a96782a1b148ad9d848188ade89b7fbf1c-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_9bf4_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-9bf415a96782a1b148ad9d848188ade89b7fbf1c"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-9bf415a96782a1b148ad9d848188ade89b7fbf1c.tar.gz


  bundle-releases:
    executor: releaser
    steps:
      - checkout
      - write-all-package-cache-keys
      - load-darwin_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 919bc5b002bffd765b8261b40aa27cacc534e4c7
          name: Write package metadata for darwin_386_package
          command: |
            make package-meta
      - load-darwin_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: c006aa3c2e9cb421217fc195a8b5fe1493c99dfc
          name: Write package metadata for darwin_amd64_package
          command: |
            make package-meta
      - load-freebsd_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 4c3dbe7adf549efddb686e9bf6cc8666b81efce8
          name: Write package metadata for freebsd_386_package
          command: |
            make package-meta
      - load-freebsd_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: ebd8f741e36e971bf8906228a9d861e66061acd7
          name: Write package metadata for freebsd_amd64_package
          command: |
            make package-meta
      - load-freebsd_arm_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 43b2f6068201dec5d833e3ac29bf03d46e5060cf
          name: Write package metadata for freebsd_arm_package
          command: |
            make package-meta
      - load-linux_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 05d375f6d19e5284869d00e7120b71a223b3b967
          name: Write package metadata for linux_386_package
          command: |
            make package-meta
      - load-linux_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: aea2aa1ce7ea5821f6c53c4f5cafab923231e8b6
          name: Write package metadata for linux_amd64_package
          command: |
            make package-meta
      - load-linux_arm_package
      - run:
          environment:
            PACKAGE_SPEC_ID: c3fdbe38d3bc9b7554715738a9a25fc311f6a5df
          name: Write package metadata for linux_arm_package
          command: |
            make package-meta
      - load-linux_arm64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: b1cd02e155f42b9286938d330b86d891f8403698
          name: Write package metadata for linux_arm64_package
          command: |
            make package-meta
      - load-netbsd_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 7b268b6eedd728149b922372945271689c30005a
          name: Write package metadata for netbsd_386_package
          command: |
            make package-meta
      - load-netbsd_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 3dd48d63601afe776f90de8d28afae11e1b6face
          name: Write package metadata for netbsd_amd64_package
          command: |
            make package-meta
      - load-openbsd_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: cb687fc98fc393f1c7b504453f00a950041b8aae
          name: Write package metadata for openbsd_386_package
          command: |
            make package-meta
      - load-openbsd_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 53d456926f97eab2ea230c6c5259383f3af60465
          name: Write package metadata for openbsd_amd64_package
          command: |
            make package-meta
      - load-solaris_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 6fc000f07f800a0a6436eaa06d23bd76ff6063fa
          name: Write package metadata for solaris_amd64_package
          command: |
            make package-meta
      - load-windows_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 8c6e9720cd437446bdac6a6e5c636ff0520ff668
          name: Write package metadata for windows_386_package
          command: |
            make package-meta
      - load-windows_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: b937c11f50b01fd9efc300a17a18721c10c31117
          name: Write package metadata for windows_amd64_package
          command: |
            make package-meta
      - run:
          name: Write package aliases
          command:
            make aliases
      - run:
          name: List Build Cache
          command: ls -lahR .buildcache

      # Surface the package store directory as an artifact.
      # This makes each zipped package separately downloadable.
      - store_artifacts:
          path: .buildcache/packages
          destination: packages-d6b3c72b3a31a52eb1fed388b182f973b8a21bd9-cb922bde4d4d8e8a

      # Surface a tarball of the whole package store as an artifact.
      - run: tar -czf packages-d6b3c72b3a31a52eb1fed388b182f973b8a21bd9-cb922bde4d4d8e8a.tar.gz .buildcache/packages
      - store_artifacts:
          path: packages-d6b3c72b3a31a52eb1fed388b182f973b8a21bd9-cb922bde4d4d8e8a.tar.gz
          destination: packages-d6b3c72b3a31a52eb1fed388b182f973b8a21bd9-cb922bde4d4d8e8a.tar.gz

      # Surface a tarball of just the metadata files.
      - run: tar -czf meta-d6b3c72b3a31a52eb1fed388b182f973b8a21bd9-cb922bde4d4d8e8a.tar.gz .buildcache/packages/store/*.json
      - store_artifacts:
          path: meta-d6b3c72b3a31a52eb1fed388b182f973b8a21bd9-cb922bde4d4d8e8a.tar.gz
          destination: meta-d6b3c72b3a31a52eb1fed388b182f973b8a21bd9-cb922bde4d4d8e8a.tar.gz

commands:
  load-darwin_386_package:
    steps:
      - restore_cache:
          key: 'cache002-package-919bc5b002bffd765b8261b40aa27cacc534e4c7-{{checksum ".buildcache/cache-keys/package-919bc5b002bffd765b8261b40aa27cacc534e4c7"}}'
  
  load-darwin_amd64_package:
    steps:
      - restore_cache:
          key: 'cache002-package-c006aa3c2e9cb421217fc195a8b5fe1493c99dfc-{{checksum ".buildcache/cache-keys/package-c006aa3c2e9cb421217fc195a8b5fe1493c99dfc"}}'
  
  load-freebsd_386_package:
    steps:
      - restore_cache:
          key: 'cache002-package-4c3dbe7adf549efddb686e9bf6cc8666b81efce8-{{checksum ".buildcache/cache-keys/package-4c3dbe7adf549efddb686e9bf6cc8666b81efce8"}}'
  
  load-freebsd_amd64_package:
    steps:
      - restore_cache:
          key: 'cache002-package-ebd8f741e36e971bf8906228a9d861e66061acd7-{{checksum ".buildcache/cache-keys/package-ebd8f741e36e971bf8906228a9d861e66061acd7"}}'
  
  load-freebsd_arm_package:
    steps:
      - restore_cache:
          key: 'cache002-package-43b2f6068201dec5d833e3ac29bf03d46e5060cf-{{checksum ".buildcache/cache-keys/package-43b2f6068201dec5d833e3ac29bf03d46e5060cf"}}'
  
  load-linux_386_package:
    steps:
      - restore_cache:
          key: 'cache002-package-05d375f6d19e5284869d00e7120b71a223b3b967-{{checksum ".buildcache/cache-keys/package-05d375f6d19e5284869d00e7120b71a223b3b967"}}'
  
  load-linux_amd64_package:
    steps:
      - restore_cache:
          key: 'cache002-package-aea2aa1ce7ea5821f6c53c4f5cafab923231e8b6-{{checksum ".buildcache/cache-keys/package-aea2aa1ce7ea5821f6c53c4f5cafab923231e8b6"}}'
  
  load-linux_arm_package:
    steps:
      - restore_cache:
          key: 'cache002-package-c3fdbe38d3bc9b7554715738a9a25fc311f6a5df-{{checksum ".buildcache/cache-keys/package-c3fdbe38d3bc9b7554715738a9a25fc311f6a5df"}}'
  
  load-linux_arm64_package:
    steps:
      - restore_cache:
          key: 'cache002-package-b1cd02e155f42b9286938d330b86d891f8403698-{{checksum ".buildcache/cache-keys/package-b1cd02e155f42b9286938d330b86d891f8403698"}}'
  
  load-netbsd_386_package:
    steps:
      - restore_cache:
          key: 'cache002-package-7b268b6eedd728149b922372945271689c30005a-{{checksum ".buildcache/cache-keys/package-7b268b6eedd728149b922372945271689c30005a"}}'
  
  load-netbsd_amd64_package:
    steps:
      - restore_cache:
          key: 'cache002-package-3dd48d63601afe776f90de8d28afae11e1b6face-{{checksum ".buildcache/cache-keys/package-3dd48d63601afe776f90de8d28afae11e1b6face"}}'
  
  load-openbsd_386_package:
    steps:
      - restore_cache:
          key: 'cache002-package-cb687fc98fc393f1c7b504453f00a950041b8aae-{{checksum ".buildcache/cache-keys/package-cb687fc98fc393f1c7b504453f00a950041b8aae"}}'
  
  load-openbsd_amd64_package:
    steps:
      - restore_cache:
          key: 'cache002-package-53d456926f97eab2ea230c6c5259383f3af60465-{{checksum ".buildcache/cache-keys/package-53d456926f97eab2ea230c6c5259383f3af60465"}}'
  
  load-solaris_amd64_package:
    steps:
      - restore_cache:
          key: 'cache002-package-6fc000f07f800a0a6436eaa06d23bd76ff6063fa-{{checksum ".buildcache/cache-keys/package-6fc000f07f800a0a6436eaa06d23bd76ff6063fa"}}'
  
  load-windows_386_package:
    steps:
      - restore_cache:
          key: 'cache002-package-8c6e9720cd437446bdac6a6e5c636ff0520ff668-{{checksum ".buildcache/cache-keys/package-8c6e9720cd437446bdac6a6e5c636ff0520ff668"}}'
  
  load-windows_amd64_package:
    steps:
      - restore_cache:
          key: 'cache002-package-b937c11f50b01fd9efc300a17a18721c10c31117-{{checksum ".buildcache/cache-keys/package-b937c11f50b01fd9efc300a17a18721c10c31117"}}'
  

  write-build-layer-cache-keys:
    steps:
      - run:
          name: Write builder layer cache keys
          command: make -C packages*.lock write-builder-cache-keys

  write-package-cache-key:
    steps:
      - run:
          name: Write package cache key
          command: make -C packages*.lock write-package-cache-key

  write-all-package-cache-keys:
    steps:
      - run:
          name: Write package cache key
          command: make -C packages*.lock write-all-package-cache-keys
